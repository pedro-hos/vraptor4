<!DOCTYPE HTML> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <title>VRaptor 4 - Events</title> <link rel="shortcut icon" href="../../../img/favicon.png"> <link rel="stylesheet" href="/css/style.min.css"/> <meta name="generator" content="nanoc 3.6.7"> </head> <body> <header class="container"> <h1 class="logo"><a class="logo-link" href="../.."> <img src="../../../img/logo.png" alt="VRaptor"> </a></h1> <ul class="community"> <li><a href="https://groups.google.com/forum/?hl=en#!forum/vraptor4" target="_blank">Google Groups</a></li> <li><a href="https://github.com/caelum/vraptor4/" target="_blank">GitHub</a></li> <li><a href="http://questions.vraptor.org" target="_blank">VRaptor Questions</a></li> </ul> <ul class="site-languages"> <li> <a class="site-language flag flag-en " title="en" href="../.."> EN </a> </li> <li> <a class="site-language flag flag-pt not-selected" title="pt" href="../../../pt"> PT </a> </li> </ul> </header> <input type="checkbox" id="nav-visibility"> <label for="nav-visibility" class="nav-toggle">Menu</label> <nav class="main-nav"> <ul> <li><a href="../../download">Download</a></li> <li><a href="../one-minute-guide/">Documentation</a></li> <li><a href="../../cookbook/accepting-urls-ending-with-a-slash">Cookbook</a></li> <li><a href="https://github.com/caelum/vraptor4/releases" target="_blank">Changelog</a></li> <li><a href="https://github.com/caelum/vraptor4/milestones" target="_blank">Roadmap</a></li> <li><a href="../../../javadoc">Javadoc</a></li> </ul> </nav> <nav class="doc-nav container"> <h1>Documentation</h1> <ul> <li><a href="../one-minute-guide">One minute guide</a></li> <li><a href="../ten-minute-guide">Ten minute guide</a></li> <li><a href="../controllers-rest">REST Controllers</a></li> <li><a href="../components">Components</a></li> <li><a href="../converters">Converters</a></li> <li><a href="../validation">Validation</a></li> <li><a href="../interceptors">Interceptors</a></li> <li><a href=".">Events</a></li> <li><a href="../view-and-ajax">View and Ajax</a></li> <li><a href="../download-and-upload">Download and Upload</a></li> <li><a href="../environment">Environment</a></li> <li><a href="../plugins">Plugins</a></li> <li><a href="../dependencies-and-prerequisites">Dependencies and prerequisites</a></li> <li><a href="../testing-components-and-controllers">Testing Components and Controllers</a></li> <li><a href="../migrating-vraptor3-project">Migrating from VRaptor 3</a></li> <li><a href="../contributing-to-vraptor">Contributing to VRaptor</a></li> </ul> </nav> <main class="container doc-container"> <h1 id="working-with-cdi-events">Working with CDI events</h1> <p>VRaptor now comes the main stream of the request using CDI events. The following image displays the triggered events and their observers:</p> <p><img src="../../../img/vraptorEventPipeline.png" id="eventPileline" alt="VRaptor 4 Event Pipeline"></p> <h2 id="events-triggered-by-vraptor">Events triggered by VRaptor</h2> <ul> <li> <code>VRaptorInitialized</code> triggered on application startup, indicating that VRaptor was initialized.</li> <li> <code>RequestStarted</code> triggered the beginning of each request.</li> <li> <code>RequestSucceeded</code> fired at the end of the request only if it has been processed without error.</li> <li> <code>ControllerFound</code> and <code>ControllerNotFound</code> will indicate whether the Controller that answer the url was found or not.</li> <li> <code>InterceptorsReady</code> and <code>InterceptorsExecuted</code> indicate when the stack will be executed and after its completion.</li> <li> <code>MethodReady</code> and <code>MethodExecuted</code> when the controller method will run and after its completion.</li> </ul> <h2 id="observing-vraptor-events">Observing VRaptor events</h2> <p>You can observe any event triggered by VRaptor. You just need create a method with the <code>@Observes</code> annotation under the package <code>javax.enterprise.event</code> before the event as a parameter. Something like:</p> <pre><code class="language-java"><span class="kn">import</span> <span class="nn">javax.enterprise.event.Observes</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">br.com.caelum.vraptor.events.ControllerNotFound</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyObserver</span> <span class="o">{</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">method</span><span class="o">(</span><span class="nd">@Observes</span> <span class="n">ControllerNotFound</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// execute an action here</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre> <p>Itâ€™s important to remember that there is no order in the observers execution, that means, there is no guarantee that a method will be executed before or after any other method that observes this same event. If the order is important, consider using interceptors.</p> <h2 id="more-about-events">More about events</h2> <p>This cool feature helps you reduce the coupling of your code in an elegant manner. You can see more information about CDI events <a href="http://docs.jboss.org/cdi/spec/1.1/cdi-spec.html#_event_example">in the CDI spec</a>.</p> </main> <script src="/js/headers.min.js"></script> </body> </html>