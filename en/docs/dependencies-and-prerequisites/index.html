<!DOCTYPE HTML> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <title>VRaptor 4 - Dependencies and prerequisites</title> <link rel="shortcut icon" href="../../../img/favicon.png"> <link rel="stylesheet" href="/css/style.min.css"/> <meta name="generator" content="nanoc 3.6.7"> </head> <body> <header class="container"> <h1 class="logo"><a class="logo-link" href="../.."> <img src="../../../img/logo.png" alt="VRaptor"> </a></h1> <ul class="community"> <li><a href="https://groups.google.com/forum/?hl=en#!forum/vraptor4" target="_blank">Google Groups</a></li> <li><a href="https://github.com/caelum/vraptor4/" target="_blank">GitHub</a></li> <li><a href="http://questions.vraptor.org" target="_blank">VRaptor Questions</a></li> </ul> <ul class="site-languages"> <li> <a class="site-language flag flag-en " title="en" href="../.."> EN </a> </li> <li> <a class="site-language flag flag-pt not-selected" title="pt" href="../../../pt"> PT </a> </li> </ul> </header> <input type="checkbox" id="nav-visibility"> <label for="nav-visibility" class="nav-toggle">Menu</label> <nav class="main-nav"> <ul> <li><a href="../../download">Download</a></li> <li><a href="../one-minute-guide/">Documentation</a></li> <li><a href="../../cookbook/accepting-urls-ending-with-a-slash">Cookbook</a></li> <li><a href="https://github.com/caelum/vraptor4/releases" target="_blank">Changelog</a></li> <li><a href="https://github.com/caelum/vraptor4/milestones" target="_blank">Roadmap</a></li> <li><a href="../../../javadoc">Javadoc</a></li> </ul> </nav> <nav class="doc-nav container"> <h1>Documentation</h1> <ul> <li><a href="../one-minute-guide">One minute guide</a></li> <li><a href="../ten-minute-guide">Ten minute guide</a></li> <li><a href="../controllers-rest">REST Controllers</a></li> <li><a href="../components">Components</a></li> <li><a href="../converters">Converters</a></li> <li><a href="../validation">Validation</a></li> <li><a href="../interceptors">Interceptors</a></li> <li><a href="../events">Events</a></li> <li><a href="../view-and-ajax">View and Ajax</a></li> <li><a href="../download-and-upload">Download and Upload</a></li> <li><a href="../environment">Environment</a></li> <li><a href="../plugins">Plugins</a></li> <li><a href=".">Dependencies and prerequisites</a></li> <li><a href="../testing-components-and-controllers">Testing Components and Controllers</a></li> <li><a href="../migrating-vraptor3-project">Migrating from VRaptor 3</a></li> <li><a href="../contributing-to-vraptor">Contributing to VRaptor</a></li> </ul> </nav> <main class="container doc-container"> <h1 id="dependencies-and-prerequisites">Dependencies and prerequisites</h1> <p>VRaptor 4 depends directly on CDI 1.1, so it will work only in servers that support this version of CDI. JDK 1.7 or higher it’s also mandatory.</p> <p>The Application Servers already supported and tested are:</p> <ul> <li>Glassfish 4</li> <li>WildFly 8.0 and 8.1</li> </ul> <p>And Servlet Containers supported are:</p> <ul> <li>Tomcat 7 (+ Weld 2.x jars)</li> <li>Jetty 8 and 9 (+ Weld 2.x jars)</li> </ul> <p>To use the mentioned Servlet Containers its also necessary to add Weld 2.x jars and the following listener to your <code>web.xml</code> file to activate CDI:</p> <pre><code class="language-xml"><span class="nt">&lt;listener&gt;</span>
    <span class="nt">&lt;listener-class&gt;</span>org.jboss.weld.environment.servlet.Listener<span class="nt">&lt;/listener-class&gt;</span>
<span class="nt">&lt;/listener&gt;</span></code></pre> <p>Some dependencies may differ between applications running in an Application Server or a Servlet Container. Dependencies from Java EE specification, such as CDI or Bean Validation, are not required if you are using an Application Server.</p> <h1 id="jdk-8">JDK 8</h1> <p>It’s possible to use JDK 8 with VRaptor, but is necessary to use the latest version of Javassist dependency because the previous versions don’t support Java 8 bytecode (note that starting from VRaptor-4.0.1 this is already the default dependency):</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.javassist<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>javassist<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.18.1-GA<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p><strong>Note</strong>: If you are using Wildfly, try to use 8.1+ versions, because Javassist is already provided by the server. So even defining the dependency in your application, it won’t be used by the application. If you can’t update to 8.1+, an alternative is to update the module directly in the server.</p> <h2 id="maven">Maven</h2> <p>VRaptor 4 uses Maven to manage its dependencies. So to add VRaptor to your project, all you need to do is add the following dependency:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>br.com.caelum<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>vraptor<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.0.0<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!--or the latest version--&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>The structure of a project based on Maven is different than the conventional structure used by most IDEs. However, when a project is packaged, Maven will build its structure as a WAR:</p> <table class="content-table"> <tbody> <tr> <td>Maven Path</td> <td>Description</td> <td>Path in the WAR file</td> </tr> <tr> <td>src/main/java</td> <td>Java sources</td> <td>/WEB-INF/classes</td> </tr> <tr> <td>src/main/resources</td> <td>configuration files</td> <td>/WEB-INF/classes</td> </tr> <tr> <td>src/main/webapp</td> <td>web files</td> <td>/</td> </tr> <tr> <td>src/test/java</td> <td>Java test sources</td> <td>- ignored -</td> </tr> <tr> <td>src/test/resources</td> <td>configuration files for testing</td> <td>- ignored -</td> </tr> </tbody> </table> <p>If you don’t want to use Maven (or any build tool integrated with Maven repositories), you can create a project in your prefered IDE and add VRaptor’s jar and its dependencies. All the required jars to use VRaptor are available in a <code>zip</code> file in our <a href="../../download">downloads page</a>.</p> <h3 id="cdi">CDI</h3> <p>This is the most important dependency of VRaptor 4. If you use an Application Server, this dependency is already included, so you should declare CDI dependency with scope <code>provided</code> in your <code>pom.xml</code>:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>If you are using a Servlet Container (such as Tomcat or Jetty) you need to add the reference implementation of CDI: Weld.</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.jboss.weld.servlet<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>weld-servlet-core<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.1.2.Final<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.jboss.weld<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>weld-core-impl<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.1.2.Final<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p><strong>Warning</strong>: avoid using the artifact <code>org.jboss.weld.servlet:weld-servlet</code>. because contains a lot of unecessary classes to boot a VRaptor application. Particularly, this artifact contains a <strong>copy</strong> of whole guava code, which is already a dependency of VRaptor. This may cause several conflicts between classes of this two artifacts (which can cause typical classloader problems such as <code>NoSuchMethodError</code>s).</p> <h2 id="logging">Logging</h2> <p>We use SLF4J (Simple Logging Facade for Java) to log internal events. SLF4J can redirect log messages to several other logging libraries such as NOP, Simple, log4j and JDK Logging. To configure logging you must add to your classpath the jar <code>slf4j-api.jar</code> and also the binding jar of the library of your choice. See more about this topic at <a href="http://www.slf4j.org/manual.html">SLF4J official docs</a>.</p> <p>Most projects choose <strong>log4j</strong> to implement logging. In case you want to use it, you need to add the following dependency:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- or the latest version avaiable --&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>And you should also include a configuration file named <code>log4j.xml</code> in the <code>src/main/resources</code> directory, for example:</p> <pre><code class="language-xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span>
<span class="nt">&lt;log4j:configuration</span> <span class="na">xmlns:log4j=</span><span class="s">"http://jakarta.apache.org/log4j/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"stdout"</span> <span class="na">class=</span><span class="s">"org.apache.log4j.ConsoleAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span> <span class="na">value=</span><span class="s">"%d{HH:mm:ss,SSS} %5p [%-20c{1}] %m%n"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
    <span class="nt">&lt;category</span> <span class="na">name=</span><span class="s">"br.com.caelum.vraptor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;priority</span> <span class="na">value=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- or another value such as INFO to decrease verbosity --&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"stdout"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/category&gt;</span>
    <span class="c">&lt;!-- include configurations of your project here --&gt;</span>
<span class="nt">&lt;/log4j:configuration&gt;</span></code></pre> <p><strong>Notice:</strong> If you is deploying you application into Wildfly, you need to configure logging in the <code>standalone.xml</code> file (or in <code>domain.xml</code> if you is running in domain mode):</p> <pre><code class="language-xml"><span class="nt">&lt;subsystem</span> <span class="na">xmlns=</span><span class="s">"urn:jboss:domain:logging:2.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">category=</span><span class="s">"br.com.caelum.vraptor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">name=</span><span class="s">"DEBUG"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>
    <span class="c">&lt;!-- other content --&gt;</span>
<span class="nt">&lt;/subsystem&gt;</span></code></pre> <p>But if you want to use configuration inside your application, you can tell to Wildfly to read this configuration from your deployment:</p> <pre><code class="language-xml"><span class="nt">&lt;subsystem</span> <span class="na">xmlns=</span><span class="s">"urn:jboss:domain:logging:2.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;use-deployment-logging-config</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- other content --&gt;</span>
<span class="nt">&lt;/subsystem&gt;</span></code></pre> <h2 id="xstream-and-gson">XStream and Gson</h2> <p>XStream and Gson are used to serialize/deserialize XML and JSON respectively. Both libraries are optional, so if you don’t need to use serializing/deserializing capabilities, you can exclude those dependencies, since it’s already included as default.</p> <p>This is the XStream dependency:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.thoughtworks.xstream<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>xstream<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.4.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>And this is the Gson dependency:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.google.code.gson<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>gson<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.2.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <h2 id="bean-validation">Bean Validation</h2> <p>If you use an Application Server, it’s not necessary to add <em>Bean Validation</em> dependency because it’s already bundled with Java EE 7. But if you are using a Servlet Container, it’s required to add a implemetation, such as <em>Hibernate Validator</em>, to your project:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hibernate-validator-cdi<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.1.1.Final<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>This dependency is mandatory when running in a Servlet Container because VRaptor uses the Bean Validation API in the <code>Validator</code> class.</p> <p>It’s also required to indicate CDI to do not validate methods automatically. To do that, add the file <code>META-INF/validation.xml</code> with the following content:</p> <pre><code class="language-xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;validation-config</span> <span class="na">xmlns=</span><span class="s">"http://jboss.org/xml/ns/javax/validation/configuration"</span>
        <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">"http://jboss.org/xml/ns/javax/validation/configuration</span>
<span class="s">        validation-configuration-1.1.xsd"</span>
        <span class="na">version=</span><span class="s">"1.1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;executable-validation</span> <span class="na">enabled=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/validation-config&gt;</span></code></pre> <h2 id="paranamer">Paranamer</h2> <p>Sadly, before Java 8, it was impossible to use reflection to get parameter’s names from methods or constructors, because this information was not available in the bytecode (unless the code is compiled in <strong>debug mode</strong>, which is optional). Because of this, most of the frameworks that need this kind of information usually create a custom annotation to store parameters names. In JAX-WS, for example, it’s common to find a resource method such as <code>void add (@WebParam(name="customer") Customer customer)</code>.</p> <p>VRaptor use the <a href="http://paranamer.codehaus.org/">Paranamer</a> framework which is capable of extracting parameters information through pre compilation of your code or from debug bytecode, avoiding the use of annotations. Some of VRaptor’s developers are also contributors of Paranamer.</p> <h2 id="commons-fileupload">Commons-fileupload</h2> <p>This is an optional dependency required only if your application use file uploading:</p> <pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>commons-fileupload<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>commons-fileupload<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre> <p>Note that if you are not using any maven-compatible build tool you also need to add <code>commons-io</code> library to the classpath.</p> <h2 id="iogi">Iogi</h2> <p><strong>Iogi</strong> is a library used internally in VRaptor to inject http request parameters. Iogi is responsible for building the beans that you receive in controller methods. The great benefit of Iogi is that it is capable of building imutable classes, without the need of <strong>setters</strong>. Iogi is also capable of building your beans trough setters.</p> <p>Iogi is a mandatory dependency and it’s already included when you add VRaptor dependency.</p> <h2 id="mirror">Mirror</h2> <p><a href="http://projetos.vidageek.net/mirror/mirror/">Mirror</a> is a library to ease the use of Reflection, providing a fluent interface to the original API. Mirror is used internally to intantiate objects. It is a mandatory dependency and is already included when you add VRaptor dependency to your project.</p> </main> <script src="/js/headers.min.js"></script> </body> </html>